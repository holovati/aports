# Maintainer: Damir Holovati
pkgname=ca-certificates
pkgver=20240702
pkgrel=0
pkgdesc="Common CA certificates for SSL/TLS"
url="https://curl.se/ca/"
arch="noarch"
license="MPL-2.0"
depends=""
makedepends=""
source="cacert-$pkgver.pem::https://curl.se/ca/cacert.pem"
builddir="$srcdir"
options="!check"  # No tests for CA certificates

package() {
    # Create SSL certificate directories
    install -dm755 "$pkgdir/etc/ssl/certs"
    install -dm755 "$pkgdir/usr/share/ca-certificates"

    # Install the main CA bundle
    install -m644 "$srcdir/cacert-$pkgver.pem" \
        "$pkgdir/etc/ssl/certs/ca-certificates.crt"
    install -m644 "$srcdir/cacert-$pkgver.pem" \
        "$pkgdir/usr/share/ca-certificates/cacert.pem"

    # Create compatibility symlinks that various programs expect
    ln -sf ca-certificates.crt "$pkgdir/etc/ssl/certs/ca-bundle.crt"
    ln -sf ca-certificates.crt "$pkgdir/etc/ssl/certs/ca-bundle.pem"
    ln -sf /etc/ssl/certs/ca-certificates.crt "$pkgdir/etc/ssl/cert.pem"
}

sha512sums="
bddfc1575a830d31417b3f55adf3b18c2d4bd1434da6e3883f771ab61194e3bf2d5a7d50033f60354bd425bc78f2e07d0663ddab711bfb9d48a8ea2e8cf7de4e  cacert-20240702.pem
"
